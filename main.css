/* ============================================================
   MyOS — Design: refined dark utilitarian with editorial serif accents
   Fonts: DM Serif Display (headings) + DM Mono (data) + DM Sans (UI)
   ============================================================ */

:root {
  --bg: #0c0c0e;
  --bg2: #131316;
  --bg3: #1a1a1f;
  --bg4: #222228;
  --border: #2a2a33;
  --border2: #363640;
  --text: #e8e8f0;
  --text2: #9898a8;
  --text3: #5a5a6a;
  --accent: #c9a96e;
  --accent2: #e8c88a;
  --green: #4caf7d;
  --yellow: #f5c842;
  --red: #e05555;
  --blue: #5b8fff;
  --radius: 10px;
  --radius-sm: 6px;
  --nav-h: 68px;
  --top-h: 52px;
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}

* { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
  height: 100%;
  font-family: 'DM Sans', sans-serif;
  background: var(--bg);
  color: var(--text);
  -webkit-tap-highlight-color: transparent;
  -webkit-font-smoothing: antialiased;
}

#app {
  height: 100dvh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: relative;
}

/* ---- Screens ---- */
.screen { position: fixed; inset: 0; z-index: 100; background: var(--bg); display: flex; align-items: center; justify-content: center; }
.hidden { display: none !important; }

/* ---- Setup ---- */
.setup-inner, .auth-inner {
  width: 100%;
  max-width: 380px;
  padding: 40px 24px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}
.setup-logo, .auth-logo {
  font-family: 'DM Serif Display', serif;
  font-size: 48px;
  color: var(--accent);
  letter-spacing: -1px;
}
.setup-tagline, .auth-tagline {
  font-size: 14px;
  color: var(--text2);
  margin-top: -8px;
}
.setup-form { display: flex; flex-direction: column; gap: 10px; margin-top: 16px; }
.setup-form label { font-size: 12px; color: var(--text2); font-family: 'DM Mono', monospace; letter-spacing: 0.05em; text-transform: uppercase; }

/* ---- Inputs ---- */
input, textarea, select {
  background: var(--bg3);
  border: 1px solid var(--border2);
  border-radius: var(--radius-sm);
  color: var(--text);
  font-family: 'DM Sans', sans-serif;
  font-size: 15px;
  padding: 10px 12px;
  width: 100%;
  outline: none;
  transition: border-color 0.15s;
}
input:focus, textarea:focus, select:focus { border-color: var(--accent); }
textarea { resize: vertical; min-height: 80px; }
select { appearance: none; cursor: pointer; }

/* ---- Buttons ---- */
.btn-primary {
  background: var(--accent);
  color: #0c0c0e;
  border: none;
  border-radius: var(--radius-sm);
  font-family: 'DM Sans', sans-serif;
  font-weight: 500;
  font-size: 15px;
  padding: 12px 20px;
  cursor: pointer;
  width: 100%;
  transition: background 0.15s, opacity 0.15s;
}
.btn-primary:hover { background: var(--accent2); }
.btn-primary:active { opacity: 0.8; }

.btn-secondary {
  background: var(--bg3);
  color: var(--text);
  border: 1px solid var(--border2);
  border-radius: var(--radius-sm);
  font-family: 'DM Sans', sans-serif;
  font-size: 14px;
  padding: 9px 16px;
  cursor: pointer;
  transition: background 0.15s;
}
.btn-secondary:hover { background: var(--bg4); }

.btn-danger {
  background: transparent;
  color: var(--red);
  border: 1px solid var(--red);
  border-radius: var(--radius-sm);
  font-size: 14px;
  padding: 9px 16px;
  cursor: pointer;
}

.btn-google {
  display: flex;
  align-items: center;
  gap: 10px;
  justify-content: center;
  background: var(--bg3);
  border: 1px solid var(--border2);
  color: var(--text);
  border-radius: var(--radius-sm);
  padding: 13px 20px;
  font-size: 15px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.15s;
}
.btn-google:hover { background: var(--bg4); }
.auth-note { font-size: 12px; color: var(--text3); text-align: center; }

.icon-btn {
  background: none;
  border: none;
  color: var(--text2);
  cursor: pointer;
  padding: 6px;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  transition: color 0.15s, background 0.15s;
}
.icon-btn:hover { color: var(--text); background: var(--bg3); }

/* ---- Top bar ---- */
.topbar {
  height: var(--top-h);
  background: var(--bg);
  border-bottom: 1px solid var(--border);
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  padding: 0 16px;
  flex-shrink: 0;
  padding-top: env(safe-area-inset-top, 0px);
}
.topbar-logo {
  font-family: 'DM Serif Display', serif;
  font-size: 22px;
  color: var(--accent);
}
.topbar-center {
  font-family: 'DM Serif Display', serif;
  font-size: 17px;
  color: var(--text);
  text-align: center;
}
.topbar-right {
  display: flex;
  gap: 4px;
  justify-content: flex-end;
}

/* ---- Main content ---- */
main#content {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding-bottom: calc(var(--nav-h) + var(--safe-bottom));
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}

/* ---- Bottom nav ---- */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: calc(var(--nav-h) + var(--safe-bottom));
  padding-bottom: var(--safe-bottom);
  background: var(--bg);
  border-top: 1px solid var(--border);
  display: flex;
  align-items: flex-start;
  padding-top: 6px;
  z-index: 50;
}
.nav-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 3px;
  background: none;
  border: none;
  color: var(--text3);
  font-family: 'DM Sans', sans-serif;
  font-size: 10px;
  cursor: pointer;
  padding: 4px 2px;
  transition: color 0.15s;
}
.nav-item:hover, .nav-item.active { color: var(--accent); }

/* ---- Section layouts ---- */
.section-page {
  padding: 20px 16px;
  display: flex;
  flex-direction: column;
  gap: 0;
}

.section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}
.section-title {
  font-family: 'DM Serif Display', serif;
  font-size: 26px;
  color: var(--text);
}
.section-date {
  font-size: 12px;
  color: var(--text3);
  font-family: 'DM Mono', monospace;
}

/* ---- Cards ---- */
.card {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 14px 16px;
  margin-bottom: 8px;
  transition: border-color 0.15s;
}
.card:hover { border-color: var(--border2); }

.card-title {
  font-size: 15px;
  font-weight: 500;
  color: var(--text);
  line-height: 1.4;
}
.card-meta {
  font-size: 12px;
  color: var(--text3);
  font-family: 'DM Mono', monospace;
  margin-top: 4px;
}
.card-actions {
  display: flex;
  gap: 8px;
  margin-top: 10px;
  flex-wrap: wrap;
}

.card-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

/* ---- Status dots / badges ---- */
.status-dot {
  width: 8px; height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}
.status-green { background: var(--green); }
.status-yellow { background: var(--yellow); }
.status-red { background: var(--red); box-shadow: 0 0 6px rgba(224,85,85,0.5); }

.badge {
  display: inline-block;
  font-size: 11px;
  font-family: 'DM Mono', monospace;
  padding: 2px 7px;
  border-radius: 20px;
  background: var(--bg4);
  color: var(--text2);
}
.badge-red { background: rgba(224,85,85,0.15); color: var(--red); }
.badge-yellow { background: rgba(245,200,66,0.15); color: var(--yellow); }
.badge-green { background: rgba(76,175,125,0.15); color: var(--green); }

/* ---- Today screen ---- */
.today-section-block {
  margin-bottom: 24px;
}
.today-section-title {
  font-size: 11px;
  font-family: 'DM Mono', monospace;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--text3);
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.today-greeting {
  font-family: 'DM Serif Display', serif;
  font-size: 28px;
  color: var(--text);
  margin-bottom: 4px;
}
.today-subdate {
  font-size: 13px;
  color: var(--text3);
  font-family: 'DM Mono', monospace;
  margin-bottom: 24px;
}

/* ---- Habit grid ---- */
.habit-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 12px 16px;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  margin-bottom: 8px;
}
.habit-name { font-size: 15px; flex: 1; }
.habit-btns { display: flex; gap: 6px; }
.habit-btn {
  width: 32px; height: 32px;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border2);
  background: var(--bg3);
  cursor: pointer;
  font-size: 14px;
  display: flex; align-items: center; justify-content: center;
  transition: all 0.15s;
}
.habit-btn:hover { background: var(--bg4); }
.habit-btn.success { background: rgba(76,175,125,0.2); border-color: var(--green); }
.habit-btn.fail { background: rgba(224,85,85,0.2); border-color: var(--red); }
.habit-btn.na { background: rgba(91,143,255,0.2); border-color: var(--blue); }

/* ---- Prayer card ---- */
.prayer-count-btn {
  background: var(--bg3);
  border: 1px solid var(--border2);
  border-radius: var(--radius-sm);
  color: var(--text);
  font-family: 'DM Mono', monospace;
  font-size: 14px;
  padding: 6px 14px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  transition: all 0.15s;
}
.prayer-count-btn:hover { background: var(--bg4); }
.prayer-count { font-size: 16px; font-weight: 500; color: var(--accent); }

/* ---- Journal ---- */
.journal-editor {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.journal-editor input { font-size: 18px; font-family: 'DM Serif Display', serif; }
.journal-editor textarea { min-height: 200px; font-size: 15px; line-height: 1.65; }

/* ---- Forms / Modal ---- */
#modal-overlay {
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.75);
  z-index: 200;
  display: flex;
  align-items: flex-end;
  justify-content: center;
}
#modal-box {
  background: var(--bg2);
  border-top: 1px solid var(--border2);
  border-radius: 16px 16px 0 0;
  width: 100%;
  max-width: 600px;
  max-height: 90dvh;
  overflow-y: auto;
  padding: 20px 20px calc(20px + var(--safe-bottom));
  animation: slideUp 0.25s ease-out;
}
@keyframes slideUp {
  from { transform: translateY(100%); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}
.modal-title {
  font-family: 'DM Serif Display', serif;
  font-size: 22px;
  margin-bottom: 16px;
}
.modal-handle {
  width: 36px; height: 4px;
  background: var(--border2);
  border-radius: 2px;
  margin: 0 auto 16px;
}
.form-row { display: flex; flex-direction: column; gap: 6px; margin-bottom: 14px; }
.form-row label { font-size: 12px; color: var(--text2); font-family: 'DM Mono', monospace; letter-spacing: 0.05em; text-transform: uppercase; }
.form-inline { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
.form-actions { display: flex; gap: 8px; margin-top: 16px; }
.form-actions .btn-primary { flex: 1; }

/* ---- Search overlay ---- */
#search-overlay {
  position: fixed; inset: 0;
  background: var(--bg);
  z-index: 300;
  display: flex;
  flex-direction: column;
}
.search-inner { display: flex; flex-direction: column; height: 100%; }
.search-bar-wrap {
  display: flex;
  gap: 10px;
  align-items: center;
  padding: 16px;
  border-bottom: 1px solid var(--border);
}
.search-bar-wrap input {
  flex: 1;
  background: var(--bg3);
  font-size: 16px;
}
#search-close { background: none; border: none; color: var(--text2); font-size: 18px; cursor: pointer; padding: 4px 8px; }
#search-results { flex: 1; overflow-y: auto; padding: 16px; }
.search-group-title {
  font-size: 11px;
  font-family: 'DM Mono', monospace;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--text3);
  margin: 16px 0 8px;
}
.search-item {
  padding: 10px 14px;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  margin-bottom: 6px;
  cursor: pointer;
}
.search-item:hover { border-color: var(--border2); }
.search-item-title { font-size: 14px; }
.search-item-meta { font-size: 12px; color: var(--text3); margin-top: 2px; }

/* ---- Toast ---- */
#toast-container {
  position: fixed;
  bottom: calc(var(--nav-h) + var(--safe-bottom) + 12px);
  left: 50%;
  transform: translateX(-50%);
  z-index: 400;
  display: flex;
  flex-direction: column;
  gap: 8px;
  align-items: center;
  pointer-events: none;
}
.toast {
  background: var(--bg4);
  border: 1px solid var(--border2);
  color: var(--text);
  font-size: 13px;
  padding: 8px 16px;
  border-radius: 20px;
  animation: toastIn 0.2s ease-out;
  white-space: nowrap;
}
@keyframes toastIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ---- Undo bar ---- */
#undo-bar {
  position: fixed;
  bottom: calc(var(--nav-h) + var(--safe-bottom) + 12px);
  left: 16px; right: 16px;
  background: var(--bg4);
  border: 1px solid var(--border2);
  border-radius: var(--radius);
  padding: 12px 16px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  z-index: 150;
  animation: slideUpBar 0.2s ease-out;
}
@keyframes slideUpBar {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}
#undo-btn {
  background: var(--accent);
  color: #0c0c0e;
  border: none;
  border-radius: var(--radius-sm);
  padding: 6px 14px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
}
#undo-message { font-size: 13px; color: var(--text2); }

/* ---- Labels ---- */
.labels-wrap { display: flex; flex-wrap: wrap; gap: 6px; }
.label-chip {
  font-size: 11px;
  font-family: 'DM Mono', monospace;
  background: var(--bg4);
  border: 1px solid var(--border2);
  border-radius: 12px;
  padding: 3px 9px;
  color: var(--text2);
  cursor: pointer;
  transition: all 0.15s;
}
.label-chip.active { background: rgba(201,169,110,0.15); border-color: var(--accent); color: var(--accent); }

/* ---- Empty state ---- */
.empty-state {
  padding: 40px 20px;
  text-align: center;
  color: var(--text3);
}
.empty-state-icon { font-size: 36px; margin-bottom: 12px; opacity: 0.5; }
.empty-state p { font-size: 14px; }

/* ---- Sync status ---- */
.sync-status {
  font-size: 11px;
  font-family: 'DM Mono', monospace;
  color: var(--text3);
  text-align: center;
  padding: 8px;
}
.sync-status.syncing { color: var(--yellow); }
.sync-status.error { color: var(--red); }

/* ---- Settings ---- */
.settings-section { margin-bottom: 28px; }
.settings-section-title {
  font-size: 11px;
  font-family: 'DM Mono', monospace;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--text3);
  margin-bottom: 10px;
}
.settings-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  margin-bottom: 6px;
}
.settings-label { font-size: 14px; }
.settings-value { font-size: 13px; color: var(--text2); font-family: 'DM Mono', monospace; }

/* ---- Checkin progress ---- */
.checkin-progress {
  height: 3px;
  background: var(--bg4);
  border-radius: 2px;
  margin-top: 8px;
  overflow: hidden;
}
.checkin-progress-fill {
  height: 100%;
  border-radius: 2px;
  transition: width 0.4s ease;
}

/* ---- Fab button ---- */
.fab {
  position: fixed;
  bottom: calc(var(--nav-h) + var(--safe-bottom) + 16px);
  right: 20px;
  width: 52px; height: 52px;
  border-radius: 50%;
  background: var(--accent);
  border: none;
  color: #0c0c0e;
  font-size: 26px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 4px 20px rgba(201,169,110,0.4);
  z-index: 40;
  transition: transform 0.15s, box-shadow 0.15s;
}
.fab:hover { transform: scale(1.05); box-shadow: 0 6px 24px rgba(201,169,110,0.5); }
.fab:active { transform: scale(0.95); }

/* ---- Scrollbar ---- */
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 2px; }

/* ---- Completed task ---- */
.task-done .card-title { text-decoration: line-through; color: var(--text3); }

/* ---- Days badge ---- */
.days-open {
  font-size: 11px;
  font-family: 'DM Mono', monospace;
  background: var(--bg4);
  border-radius: 10px;
  padding: 2px 8px;
  color: var(--text3);
  white-space: nowrap;
}
.days-open.old { color: var(--yellow); background: rgba(245,200,66,0.1); }
.days-open.very-old { color: var(--red); background: rgba(224,85,85,0.1); }

/* ---- Checkbox ---- */
.checkbox-wrap {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  cursor: pointer;
}
.checkbox {
  width: 20px; height: 20px;
  border: 2px solid var(--border2);
  border-radius: 5px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s;
  margin-top: 1px;
}
.checkbox.checked {
  background: var(--accent);
  border-color: var(--accent);
}
.checkbox.checked::after {
  content: '✓';
  font-size: 12px;
  color: #0c0c0e;
  font-weight: 700;
}

/* ---- Prayer text preview ---- */
.prayer-text {
  font-size: 13px;
  color: var(--text2);
  margin-top: 6px;
  line-height: 1.5;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* ---- Divider ---- */
.divider { height: 1px; background: var(--border); margin: 16px 0; }

/* ---- Filter row ---- */
.filter-row {
  display: flex;
  gap: 8px;
  overflow-x: auto;
  padding-bottom: 8px;
  margin-bottom: 16px;
  scrollbar-width: none;
}
.filter-row::-webkit-scrollbar { display: none; }
.filter-chip {
  flex-shrink: 0;
  font-size: 12px;
  font-family: 'DM Mono', monospace;
  background: var(--bg3);
  border: 1px solid var(--border2);
  border-radius: 16px;
  padding: 5px 12px;
  cursor: pointer;
  color: var(--text2);
  white-space: nowrap;
  transition: all 0.15s;
}
.filter-chip.active { background: rgba(201,169,110,0.15); border-color: var(--accent); color: var(--accent); }

/* ---- Toggle ---- */
.toggle-completed {
  font-size: 12px;
  color: var(--text3);
  background: none;
  border: none;
  cursor: pointer;
  font-family: 'DM Sans', sans-serif;
  text-decoration: underline;
  text-underline-offset: 2px;
  padding: 0;
}

/* ---- Completed section ---- */
.completed-section { margin-top: 16px; }
.completed-section-title {
  font-size: 11px;
  font-family: 'DM Mono', monospace;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--text3);
  margin-bottom: 8px;
}

/* ---- Animations ---- */
.fade-in {
  animation: fadeIn 0.2s ease-out;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ---- Sync spinning ---- */
.spin { animation: spin 1s linear infinite; }
@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
